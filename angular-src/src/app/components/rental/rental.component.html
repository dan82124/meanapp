<h2 class="page-header">Rentals <a class="btn btn-success pull-right" data-toggle="modal" data-target="#startModal" (click)="clearCustInfo()">Start Rental</a></h2>

<!-- Rental List -->
<div *ngIf="rentals">
	<ul class="list-group">
		<li class="list-group-item" *ngFor="let rental of rentals">
			<div class="row">
				<div class="col-md-3 col-sm-6 col-xs-12 text-center">
	      	<b>Rental ID:</b> {{rental._id}}
	      </div>
	      <div class="col-md-3 col-sm-6 col-xs-12 text-center">
	      	<b>Customer ID:</b> {{rental.customerId}}
	      </div>
	      <div class="col-md-3 col-sm-6 col-xs-12 text-center">
	      	<b>Date:</b> {{rental.date | date:"medium"}}
	      </div>
	      <div class="col-md-3 col-sm-6 col-xs-12 text-center" style="overflow-wrap:break-word;">
	      	<b>Bikes:</b> {{rental.bikeId}}
	      </div>
    	</div>
    	<hr>
    	<div class="row">
	      <div class="col-md-12 col-sm-12 col-xs-12 text-center">
	      	<button type="button" class="btn btn-primary btn-xs" (click)="onAddBike(rental)" (click)="clearSelectedBikes()" data-toggle="modal" data-target="#addBikeModal">Add Bike</button>
	      	<button type="button" class="btn btn-primary btn-xs" (click)="onDelBike(rental)" (click)="clearSelectedBikes()" data-toggle="modal" data-target="#delBikeModal">Remove Bike</button>
	      	<button type="button" class="btn btn-primary btn-xs" (click)="onEditRental(rental)" data-toggle="modal" data-target="#editModal">Edit Time</button>
	      	<button type="button" class="btn btn-danger btn-xs" (click)="onDelRental(rental)">Delete</button>
	      </div>
    	</div>
    </li>
	</ul>
</div>

<!-- Start Rental Modal -->
<div class="modal fade" id="startModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Customer Info</h4>
      </div>
      <div class="modal-body">
        <div class="form-group">
					<label>Customer First Name:</label>
					<input type="text" [(ngModel)]="custFname" name="custFname" class="form-control">
				</div>
				<div class="form-group">
					<label>Customer Last Name:</label>
					<input type="text" [(ngModel)]="custLname" name="custLname" class="form-control">
				</div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" (click)="clearCustInfo()">Clear</button>
        <button type="button" class="btn btn-primary" (click)="getCustId()" data-dismiss="modal">Create Rental</button>
      </div>
    </div>
  </div>
</div>

<!-- Edit Rental Modal -->
<div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Rental Info</h4>
      </div>
      <div class="modal-body">
        <div class="form-group">
					<label>Rental ID:</label>
					{{this.rentalId}}
				</div>
				<div class="form-group">
					<label>Customer ID:</label>
					{{this.custId}}
				</div>
				<div class="form-group">
					<label>Date:</label>
					<input type="text" [(ngModel)]="editDate" id="rentalDate" class="form-control">
				</div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" (click)="resetEdit()">Reset Change</button>
        <button type="button" class="btn btn-primary" (click)="onEditSubmit()" data-dismiss="modal">Change Time</button>
      </div>
    </div>
  </div>
</div>

<!-- Add Bike Modal -->
<div class="modal fade" id="addBikeModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="clearSelectedBikes()"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Rental Info</h4>
      </div>
      <div class="modal-body">
        <div class="form-group">
					<label>Rental ID:</label>
					{{this.rentalId}}
				</div>
				<div class="form-group">
					<label>Customer ID:</label>
					{{this.custId}}
				</div>
				<div class="form-group">
					<label>Date:</label>
					{{this.rentalDate | date:"medium"}}
				</div>
				<div class="form-group">
					<label>Bike:</label>
					<label *ngFor="let inBike of inBikes" class="form-control">
		        <input type="checkbox" (change)="updateChecked(inBike)"> ID: {{inBike._id}} | Model: {{inBike.model}}
		    	</label>
				</div>
      </div>
      <div class="modal-footer">
        <button *ngIf="selectedBikes.length !== 0" type="button" class="btn btn-primary" (click)="onAddBikeSubmit()" data-dismiss="modal">Add Bike</button>
      </div>
    </div>
  </div>
</div>

<!-- Remove Bike Modal -->
<div class="modal fade" id="delBikeModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="clearSelectedBikes()"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Remove Bike</h4>
      </div>
      <div class="modal-body">
        <div class="form-group">
					<label>Rental ID:</label>
					{{this.rentalId}}
				</div>
				<div class="form-group">
					<label>Customer ID:</label>
					{{this.custId}}
				</div>
				<div class="form-group">
					<label>Date:</label>
					{{this.rentalDate | date:"medium"}}
				</div>
				<div class="form-group">
					<label>Bike:</label>
					<label *ngFor="let outBike of outBikes" class="form-control">
		        <input type="checkbox" (change)="updateChecked(outBike)"> ID: {{outBike._id}} | Model: {{outBike.model}}
		    	</label>
				</div>
      </div>
      <div class="modal-footer">
        <button *ngIf="selectedBikes.length !== 0" type="button" class="btn btn-primary" (click)="onDelBikeSubmit()" data-dismiss="modal">Remove Bike</button>
      </div>
    </div>
  </div>
</div>